<meta charset="UTF-8">
<meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'/>
<!-- JS -->

<script type="text/javascript" src="/gridster-jekyll-theme/js/jquery-2.2.2.min.js" ></script>

{% if jekyll.environment != "development" %}<script  type="text/javascript">
  var host = "{{ site.domain }}";
  if ((host == window.location.host) && (window.location.protocol != "https:"))
    window.location.protocol = "https";
</script>{% endif %}
{% if page.math %}<script type="text/x-mathjax-config">
	{% include _mathjax-cdn-setup.min.js %}
</script>{% endif %}
<script  type="text/javascript">
	{% include _fallback.min.js %}
</script>
<script  type="text/javascript">
  fallback.load({
    main: "{{ site.baseurl | replace: '//', '/' }}/css/main.css",
		fontawesome: [
			{% if jekyll.environment != "development" %}"https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css",
			"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css",{% endif %}
			"{{ site.baseurl | replace: '//', '/' }}/css/font-awesome.min.css"
		],
    jQuery: [
			{% if jekyll.environment != "development" %}"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js",
      "https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js",{% endif %}
			"{{ site.baseurl | replace: '//', '/' }}/js/jquery-2.2.2.min.js"
    ],
		Materialize: [
			{% if jekyll.environment != "development" %}"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js",{% endif %}
			"{{ site.baseurl | replace: '//', '/' }}/js/materialize.min.js"
		],
    cssTransitionSupport: [
      {% if site.infinite_scroll == true %}
        {% if site.sidebar_toc == true %}
          "{{ site.baseurl | replace: '//', '/' }}/js/global.infinite.toc.min.js"
        {% else %}
          "{{ site.baseurl | replace: '//', '/' }}/js/global.infinite.min.js"
        {% endif %}
      {% else %}
        {% if site.sidebar_toc == true %}
          "{{ site.baseurl | replace: '//', '/' }}/js/global.toc.min.js"
        {% else %}
          "{{ site.baseurl | replace: '//', '/' }}/js/global.min.js"
        {% endif %}
		  {% endif %}
    ]{% if page.math %},
		MathJax: [
			{% if jekyll.environment != "development" %}"https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full",{% endif %}
			"{{ site.baseurl | replace: '//', '/' }}/MathJax/MathJax.js?config=TeX-AMS_CHTML-full"
		]{% endif %}
    }, {
    shim: {
      'Materialize': ['jQuery'],
      'cssTransitionSupport': ['Materialize']
    }
  });


{% if page.sidebar_toc %}
	fallback.ready(function() {
		$('#post-content').toc({
      renderIn:'#renderTOC',
			showCollapsed: true,
			minItemsToShowToc: 0
		});
	});
</script>
<!-- CSS -->
<style type="text/css">
	{% capture include_to_scssify %}
		{% include _heading.scss %}
	{% endcapture %}
	{{ include_to_scssify | scssify }}
</style>
{% else %}
</script>
{% endif %}
{% if page.amsthm %}
<style type="text/css">
	{% capture include_to_scssify %}
		{% include _amsthm.scss %}
	{% endcapture %}
	{{ include_to_scssify | scssify }}
</style>
{% endif %}
<!-- Google Analytics. Put the ID in _config.yml -->
{% if jekyll.environment != "development" %}<script>
</script>{% endif %}
<link rel="stylesheet" id="color-change">
<!-- Site Infos -->
{% seo %}
{% feed_meta %}
{% include favicon.html %}

<!-- Load the user's last selected theme for the lamp -->
<script>
	//const savedTheme = localStorage.getItem('theme');
	//// alert(savedTheme);
	//if (savedTheme) {
	//	document.documentElement.className = savedTheme;
	//} else {
	//	localStorage.setItem('theme', 'light');
	//}
	(function () {
		const savedTheme = localStorage.getItem('theme');
		// alert(savedTheme);
		if (savedTheme) {
			document.documentElement.className = savedTheme;
		} else {
			const userPrefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
			const preferredTheme = userPrefersDarkMode ? 'dark' : 'light';
			document.documentElement.className = preferredTheme;
			localStorage.setItem('theme', preferredTheme);
		}
		// alert('Saved theme = ' + savedTheme);
    })();

	//
	// ToggleDarkMode; forceDarkMode=true to froce into dark mode
	// 
    function ToggleDarkMode(forceDarkMode) {
   //     if (forceDarkMode === null || forceDarkMode === undefined) {
			//forceDarkMode = false;
   //     }

        document.body.classList.toggle("dark-theme", forceDarkMode);

        const divClasses = document.querySelectorAll('logo-container');
        if (!divClasses || divClasses === null || divClasses === undefined) {
			// alert("No divClasses found! ");
        }
		else
		{
            divClasses.forEach(element => {
                divClasses.classList.toggle("dark-theme", forceDarkMode);
            });
        }
		// set all custom <element> tages to dark mode
        // since the article element is customer (but does not have a dash in the name), we iterate all <element> tags:
        // see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define (not used)
		const articleClasses = document.querySelectorAll('article');

        if (!articleClasses || articleClasses === null || articleClasses === undefined ) {

        }
		else 
		{
            articleClasses.forEach(element => {
                element.classList.toggle("dark-theme", forceDarkMode);
            });
        }

		// page should be in dark mode now		
    }


</script>
